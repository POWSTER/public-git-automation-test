{"version":3,"file":"js/landingAudio.bolt.js?v=14b790422c85126b5166","mappings":"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","sources":["webpack://thundr/./static/src/components/bolt/landingAudio/landingAudio.js","webpack://thundr/./static/src/components/bolt/landingAudio/landingAudio.sss?2a37"],"sourcesContent":["import { h, Component } from 'preact';\nimport { joinClasses } from 'utils/utils';\n// import Sound from 'components/bolt/icons/sound';\nimport s from 'components/bolt/landingAudio/landingAudio.sss';\nimport Store from 'store/store';\n\nconst loadHowler = async () => {\n\tif (document.querySelector(`script[src*=\"howler.min.js\"]`)) {\n\t\treturn;\n\t}\n\treturn new Promise((resolve, reject) => {\n\t\tlet script = document.createElement('script');\n\t\tscript.onload = resolve;\n\t\tscript.onerror = reject;\n\t\tscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js';\n\t\tscript.type = 'module';\n\t\tdocument.body.appendChild(script);\n\t});\n};\n\nexport default class LandingAudio extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.initAudio = this.initAudio.bind(this);\n\t\tthis.play = this.togglePlaying.bind(this, false);\n\t\tthis.pause = this.togglePlaying.bind(this, true);\n\t\tthis.togglePlaying = this.togglePlaying.bind(this);\n\t\tthis.checkIfAudioShouldPlay = this.checkIfAudioShouldPlay.bind(this);\n\t\tthis.onVidOverlayOpen = this.onVidOverlayOpen.bind(this);\n\t\tthis.onVidOverlayClose = this.onVidOverlayClose.bind(this);\n\t\tthis.onEmbeddedVideoPlay = this.onEmbeddedVideoPlay.bind(this);\n\t\tthis.onEmbeddedVideoPause = this.onEmbeddedVideoPause.bind(this);\n\n\t\tthis.state = {\n\t\t\tuserMuted: !props.data.autoplay,\n\t\t\tshowAudio: false,\n\t\t\tpaused: true,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tStore.on('SET_ACTIVE_PAGE', this.checkIfAudioShouldPlay);\n\t\tStore.on('OPEN_VIDEO_OVERLAY', this.onVidOverlayOpen);\n\t\tStore.on('CLOSE_VIDEO_OVERLAY', this.onVidOverlayClose);\n\t\tStore.on('EMBEDDED_VIDEO_PLAY', this.onEmbeddedVideoPlay);\n\t\tStore.on('EMBEDDED_VIDEO_PAUSE', this.onEmbeddedVideoPause);\n\t\tif (typeof window !== 'undefined') {\n\t\t\tthis.checkIfAudioShouldPlay();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tStore.off('SET_ACTIVE_PAGE', this.checkIfAudioShouldPlay);\n\t\tStore.off('OPEN_VIDEO_OVERLAY', this.onVidOverlayOpen);\n\t\tStore.off('CLOSE_VIDEO_OVERLAY', this.onVidOverlayClose);\n\t\tStore.off('EMBEDDED_VIDEO_PLAY', this.onEmbeddedVideoPlay);\n\t\tStore.off('EMBEDDED_VIDEO_PAUSE', this.onEmbeddedVideoPause);\n\n\t\tif (this.audio) {\n\t\t\tthis.audio.unload();\n\t\t}\n\t}\n\n\tasync checkIfAudioShouldPlay(activePage) {\n\t\tconst { userMuted } = this.state;\n\t\tactivePage = activePage || this.props?.store?.activePage;\n\n\t\tlet inclusions = this.props?.data?.inclusions || '';\n\t\tif (inclusions) {\n\t\t\tinclusions = inclusions.split(',').map((page) => page.trim());\n\t\t}\n\n\t\tif (!inclusions.length || inclusions.includes(activePage)) {\n\t\t\tif (!this.audio) {\n\t\t\t\tawait this.initAudio();\n\t\t\t}\n\t\t\tif (this.audio && !this.audio.playing() && !userMuted) {\n\t\t\t\tthis.audio.play();\n\t\t\t}\n\t\t\tthis.setState({ showAudio: true });\n\t\t} else {\n\t\t\tthis.stopAndHideAudio();\n\t\t}\n\t}\n\n\tonVidOverlayOpen() {\n\t\tthis.stopAndHideAudio(true);\n\t}\n\n\tonVidOverlayClose() {\n\t\tthis.checkIfAudioShouldPlay();\n\t}\n\n\tonEmbeddedVideoPlay() {\n\t\tthis.stopAndHideAudio(false);\n\t}\n\n\tonEmbeddedVideoPause() {\n\t\tthis.checkIfAudioShouldPlay();\n\t}\n\n\tasync initAudio() {\n\t\tawait loadHowler();\n\t\tconst { src, loop, autoplay } = this.props.data;\n\t\tthis.audio = new window.Howl({\n\t\t\tsrc: [src],\n\t\t\tloop,\n\t\t\tautoplay: autoplay && !this.state.userMuted,\n\t\t\tonpause: () => {\n\t\t\t\tthis.setState({ paused: true });\n\t\t\t},\n\t\t\tonended: () => {\n\t\t\t\tthis.setState({ paused: true });\n\t\t\t},\n\t\t\tonerror: () => {\n\t\t\t\tthis.setState({ paused: true });\n\t\t\t},\n\t\t\tonplay: () => {\n\t\t\t\tthis.setState({ paused: false });\n\t\t\t},\n\t\t});\n\t}\n\n\tstopAndHideAudio(restartAudio = true) {\n\t\tif (this.audio && this.audio.playing() && !this.state.userMuted) {\n\t\t\tthis.audio.pause();\n\t\t\tif (restartAudio) {\n\t\t\t\tthis.audio.seek(0);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ showAudio: false });\n\t}\n\n\ttogglePlaying(muted) {\n\t\tconst { userMuted } = this.state;\n\n\t\tif (typeof muted !== 'boolean') {\n\t\t\tmuted = !userMuted;\n\t\t}\n\n\t\tthis.audio?.[muted ? 'pause' : 'play']();\n\n\t\tthis.setState({ userMuted: muted });\n\t}\n\n\trender() {\n\t\tconst { showAudio, userMuted } = this.state;\n\t\tconst { offsetTop } = this.props;\n\t\tconst { position } = this.props.data;\n\n\t\tif (!showAudio) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst wrapperStyle = {};\n\n\t\tif (offsetTop && offsetTop > 0 && position.match(/top/)) {\n\t\t\twrapperStyle.top = `${64 + offsetTop}px`;\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tonClick={this.togglePlaying}\n\t\t\t\tclass={joinClasses(s.wrapper, userMuted && s.muted, s[position])}\n\t\t\t\tstyle={wrapperStyle}\n\t\t\t>\n\t\t\t\t<button class={s.icon} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"landingAudio__wrapper__ciaSv\",\"icon\":\"landingAudio__icon__TAEep\",\"muted\":\"landingAudio__muted__fO6Qp\",\"top-left\":\"landingAudio__top-left__VXEaM\",\"top-right\":\"landingAudio__top-right__MHEIN\",\"bottom-left\":\"landingAudio__bottom-left__Gdf27\",\"bottom-right\":\"landingAudio__bottom-right__YLL_N\"};"],"names":["h","Component","joinClasses","s","Store","loadHowler","document","querySelector","Promise","resolve","reject","script","createElement","onload","onerror","src","type","body","appendChild","LandingAudio","constructor","props","initAudio","bind","play","togglePlaying","pause","checkIfAudioShouldPlay","onVidOverlayOpen","onVidOverlayClose","onEmbeddedVideoPlay","onEmbeddedVideoPause","state","userMuted","data","autoplay","showAudio","paused","componentDidMount","on","window","componentWillUnmount","off","audio","unload","activePage","store","inclusions","split","map","page","trim","length","includes","playing","setState","stopAndHideAudio","loop","Howl","onpause","onended","onplay","restartAudio","arguments","undefined","seek","muted","render","offsetTop","position","wrapperStyle","match","top","onClick","class","wrapper","style","icon"],"sourceRoot":""}